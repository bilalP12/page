<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Image Slider (Background from Slides)</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; }

    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: #fff;
      min-height: 100dvh;
      display: grid;
      place-items: center;    /* center the slider on the page */
      padding: 16px;
      overflow: hidden;       /* hide background overscan */
      background: #0b1220;    /* fallback while first image loads */
    }

    /* ===== Fullscreen blurred background driven by current slide ===== */
    .bg {
      position: fixed;
      inset: -10%;            /* overscan so blur edges arenâ€™t visible */
      z-index: 0;
      transform: scale(1.08); /* counter blur shrink */
      background-position: center;
      background-size: cover;
      background-repeat: no-repeat;
      filter: blur(24px) saturate(115%);
      transition: background-image .35s ease-out, opacity .35s ease-out, filter .35s ease-out;
      opacity: 0.95;
    }
    /* Soft dark veil for readability */
    .bg::after {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(120% 120% at 50% 50%, rgba(0,0,0,.35), rgba(0,0,0,.55));
    }

    /* ===== Stage: fixed aspect ratio & capped width ===== */
    .stage {
      width: min(100vw, 1200px);   /* cap width on desktops */
      aspect-ratio: 16 / 9;        /* fixed viewing area */
      background: #000;            /* letterbox bars color */
      border-radius: 14px;
      overflow: hidden;
      position: relative;
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
      z-index: 1;                  /* above the blurred bg */
    }

    .slider-container { position: absolute; inset: 0; overflow: hidden; }

    .slider {
      width: 500%;                 /* 5 slides -> 5 * 100% */
      height: 100%;
      display: flex;
      will-change: transform;
    }

    .slide {
      width: 20%;
      height: 100%;
      position: relative;
      overflow: hidden;
      background: #000;
    }

    /* Show whole image consistently; no cropping */
    .slide img {
      width: 100%;
      height: 100%;
      object-fit: contain;         /* change to 'cover' if you prefer edge-to-edge */
      object-position: center;
      display: block;
      background: #000;
    }

    .slide-content {
      position: absolute;
      inset: auto 0 0 0;
      background: linear-gradient(transparent, rgba(0,0,0,.75));
      padding: 28px 20px;
      transform: translateY(0);
      pointer-events: none;
    }
    .slide-title { font-weight: 800; font-size: clamp(16px, 2.2vw, 28px); }
    .slide-description { opacity: .9; margin-top: 6px; font-size: clamp(12px, 1.6vw, 16px); }

    .slider-indicators {
      position: absolute; left: 50%; bottom: 12px; transform: translateX(-50%);
      display: flex; gap: 10px; z-index: 5;
    }
    .indicator {
      width: 10px; height: 10px; border-radius: 50%;
      background: rgba(255,255,255,.5);
      border: 2px solid #fff;
      cursor: pointer; transition: transform .2s ease, background .2s ease;
    }
    .indicator.active { background: #fff; transform: scale(1.2); }

    .slider-nav {
      position: absolute; top: 50%; transform: translateY(-50%);
      width: 44px; height: 44px; border-radius: 50%;
      border: 2px solid rgba(255,255,255,.25);
      display: grid; place-items: center;
      background: rgba(0,0,0,.65); color: #fff;
      cursor: pointer; z-index: 5;
    }
    .prev { left: 12px; }
    .next { right: 12px; }

    @media (max-width: 420px) {
      .slider-nav { width: 38px; height: 38px; }
      .indicator { width: 9px; height: 9px; }
    }
  </style>
</head>
<body>

  <!-- Blurred background that mirrors current slide -->
  <div class="bg" id="bg"></div>

  <!-- Fixed-size stage -->
  <div class="stage" aria-label="Image slider, 5 slides">
    <div class="slider-container">
      <div class="slider">
        <div class="slide">
          <img src="./images/pic1.jpg" alt="Slide 1">
          <div class="slide-content">
            <div class="slide-title">Mountain Paradise</div>
            <div class="slide-description">Discover breathtaking mountain landscapes and pristine wilderness.</div>
          </div>
        </div>
        <div class="slide">
          <img src="./images/pic2.jpg" alt="Slide 2">
          <div class="slide-content">
            <div class="slide-title">Ocean Dreams</div>
            <div class="slide-description">Experience the serenity of crystal-clear waters and endless horizons.</div>
          </div>
        </div>
        <div class="slide">
          <img src="./images/pic3.jpg" alt="Slide 3">
          <div class="slide-content">
            <div class="slide-title">Forest Adventure</div>
            <div class="slide-description">Wander through ancient forests under emerald canopies.</div>
          </div>
        </div>
        <div class="slide">
          <img src="./images/pic4.jpg" alt="Slide 4">
          <div class="slide-content">
            <div class="slide-title">Desert Majesty</div>
            <div class="slide-description">Spectacular sunsets paint the desert sky in gold and crimson.</div>
          </div>
        </div>
        <div class="slide">
          <img src="./images/pic5.jpg" alt="Slide 5">
          <div class="slide-content">
            <div class="slide-title">High Peaks</div>
            <div class="slide-description">Crisp air and sweeping views from the summit.</div>
          </div>
        </div>
      </div>

      <!-- Dots -->
      <div class="slider-indicators" aria-hidden="true">
        <div class="indicator active"></div>
        <div class="indicator"></div>
        <div class="indicator"></div>
        <div class="indicator"></div>
        <div class="indicator"></div>
      </div>

      <!-- Arrows -->
      <button class="slider-nav prev" aria-label="Previous slide">&#8249;</button>
      <button class="slider-nav next" aria-label="Next slide">&#8250;</button>
    </div>
  </div>

  <script>
    let currentSlide = 0;
    const slides = document.querySelectorAll('.slide');
    const indicators = document.querySelectorAll('.indicator');
    const slider = document.querySelector('.slider');
    const bg = document.getElementById('bg');

    // helper: set the blurred background to current slide image
    function setBackgroundFromSlide(index){
      const img = slides[index].querySelector('img');
      if (!img) return;
      const url = img.getAttribute('src');
      // Preload for smooth swap
      const preload = new Image();
      preload.onload = () => { bg.style.backgroundImage = `url('${url}')`; };
      preload.src = url;
    }

    function updateSlider() {
      slider.style.transition = 'transform 0.6s ease-in-out';
      slider.style.transform  = `translateX(-${currentSlide * 20}%)`;
      indicators.forEach((dot, i) => dot.classList.toggle('active', i === currentSlide));
      setBackgroundFromSlide(currentSlide);   // << update background
    }

    function nextSlide() {
      currentSlide = (currentSlide + 1) % slides.length;
      updateSlider();
    }
    function prevSlide() {
      currentSlide = (currentSlide - 1 + slides.length) % slides.length;
      updateSlider();
    }

    document.querySelector('.next').addEventListener('click', nextSlide);
    document.querySelector('.prev').addEventListener('click', prevSlide);

    indicators.forEach((dot, i) => {
      dot.addEventListener('click', () => { currentSlide = i; updateSlider(); });
    });

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowRight') nextSlide();
      if (e.key === 'ArrowLeft')  prevSlide();
    });

    // Touch/swipe support
    let startX = 0;
    slider.addEventListener('touchstart', (e) => { startX = e.touches[0].clientX; }, { passive: true });
    slider.addEventListener('touchend',   (e) => {
      const endX = e.changedTouches[0].clientX;
      const diff = startX - endX;
      if (Math.abs(diff) > 50) (diff > 0 ? nextSlide : prevSlide)();
    }, { passive: true });

    // init
    setBackgroundFromSlide(currentSlide);
    updateSlider();
  </script>
</body>
</html>
